<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plantilla - Barça Athletic Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1a237e;
            --secondary-color: #283593;
            --accent-color: #ffd700;
            --text-light: #e3e3e3;
        }

        body {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: #fff;
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Navbar */
        .navbar {
            background: rgba(0, 0, 0, 0.3) !important;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
            color: var(--accent-color) !important;
            transition: transform 0.3s ease;
        }

        .navbar-brand:hover {
            transform: scale(1.05);
        }

        .nav-link {
            color: #fff !important;
            margin: 0 10px;
            position: relative;
            transition: color 0.3s ease;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent-color);
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-link.admin-link {
            color: #dc3545 !important;
            font-weight: 600;
        }

        /* Container */
        .container {
            padding-top: 120px;
            padding-bottom: 60px;
        }

        h1 {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Stats Cards */
        .stat {
            background: linear-gradient(145deg, rgba(255,255,255,0.95), rgba(255,255,255,0.9));
            color: var(--secondary-color);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 25px;
            transition: all 0.3s ease;
        }

        .stat:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .stat h3 {
            font-size: 2.5rem;
            font-weight: 800;
            margin: 0;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat p {
            margin: 10px 0 0 0;
            color: #666;
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 30px 0;
            background: rgba(0, 0, 0, 0.4);
            color: var(--text-light);
            margin-top: 60px;
            backdrop-filter: blur(10px);
        }

        footer p {
            margin: 0;
            font-size: 0.95rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding-top: 100px;
            }

            h1 {
                font-size: 2.2rem;
            }

            .stat h3 {
                font-size: 2rem;
            }
        }

        /* Cards de jugadores */

        .players-section-title {
            font-size: 2rem;
            font-weight: 700;
            margin: 40px 0 20px;
        }

        .player-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.95), rgba(255,255,255,0.9));
            color: var(--secondary-color);
            border-radius: 18px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
            transition: all 0.3s ease;
            height: 100%;
            margin: 0 auto;
            max-width: 340px;          /* evita que se estiren demasiado */
        }

        .player-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .player-card img {
            width: 100%;
            height: 220px;
            object-fit: cover;
        }

        .player-card-body {
            padding: 15px 18px 20px;
        }

        .player-card-body h5 {
            font-weight: 800;
            margin-bottom: 8px;
        }

        .player-meta {
            font-size: 0.95rem;
            margin-bottom: 4px;
        }

        .player-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: 0.03em;
            margin-bottom: 8px;
        }

        /* Colores por posición */
        .player-badge.pos-portero {
            background: #ffd54f;
            color: #333;
        }

        .player-badge.pos-defensa {
            background: #42a5f5;
            color: #fff;
        }

        .player-badge.pos-centrocampista {
            background: #66bb6a;
            color: #fff;
        }

        .player-badge.pos-delantero {
            background: #ef5350;
            color: #fff;
        }

        .team-banner {
            max-width: 900px;
            margin: 40px auto 10px;
            padding: 20px 28px;
            border-radius: 24px;
            background: rgba(0, 0, 0, 0.25);
            box-shadow: 0 15px 40px rgba(0,0,0,0.35);
        }

        .team-banner-content {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .team-banner-logo {
            width: 110px;
            height: auto;
            flex-shrink: 0;
            border-radius: 18px;
        }

        .team-banner-title {
            font-size: 2.3rem;
            font-weight: 800;
        }

        .team-banner-subtitle {
            font-size: 0.95rem;
            opacity: 0.9;
        }

        /* Opcional: en móviles, que se ponga en columna */
        @media (max-width: 576px) {
            .team-banner-content {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .team-banner-logo {
                width: 90px;
            }
        }

        .players-filter {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-chip {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 999px;
            border: 1px solid rgba(255,255,255,0.35);
            background: rgba(255,255,255,0.08);
            color: #fff;
            font-size: 0.85rem;
            font-weight: 700;
            letter-spacing: 0.04em;
            text-transform: uppercase;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .filter-chip:hover {
            background: rgba(255,255,255,0.2);
        }

        .filter-chip.active {
            background: #ffd700;
            color: #1a237e;
            border-color: #ffd700;
        }

        /* Tarjeta Próximo partido */

        .next-match-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.97), rgba(255,255,255,0.93));
            color: var(--secondary-color);
            border-radius: 24px;
            padding: 20px 28px;
            box-shadow: 0 12px 32px rgba(0,0,0,0.25);
        }

        .next-match-label {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            font-weight: 700;
            color: #888;
        }

        .next-match-header {
            text-align: center;
            margin-top: 4px;
        }

        .next-match-stadium {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: #888;
        }

        .next-match-date {
            font-size: 1rem;
            font-weight: 600;
            color: #333;
        }

        /* Layout de los equipos: 3 columnas */
        .next-match-layout {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            gap: 16px;
            margin-top: 16px;
        }

        .match-team {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .match-team-logo {
            width: 70px;
            height: auto;
        }

        .match-team-name {
            margin-top: 6px;
            font-weight: 800;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            font-size: 0.95rem;
            text-align: center;
        }

        .vs-text {
            font-weight: 900;
            font-size: 1.2rem;
            letter-spacing: 0.15em;
            text-align: center;
        }

        .next-match-btn {
            font-weight: 700;
            border-radius: 999px;
            padding: 8px 24px;
            background-color: var(--accent-color);
            color: #1a237e;
            border: none;
            box-shadow: 0 6px 16px rgba(0,0,0,0.25);
        }

        .next-match-btn:hover {
            background-color: #ffe066;
            color: #1a237e;
        }

        /* Responsive para la tarjeta de próximo partido */
        @media (max-width: 576px) {
            .next-match-layout {
                grid-template-columns: 1fr;
                row-gap: 10px;
            }

            .vs-text {
                order: 2;
            }
        }

    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">
            <img src="/logo.jpg" alt="Barça Atlètic" style="height: 30px; margin-right: 8px;"> Barça Atlètic
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" href="/"><i class="fas fa-home"></i> Inicio</a></li>
                <li class="nav-item"><a class="nav-link" href="/plantilla"><i class="fas fa-users"></i> Plantilla</a></li>
                <li class="nav-item"><a class="nav-link" href="/eventos"><i class="fas fa-calendar-alt"></i> Eventos</a></li>
                <li class="nav-item"><a class="nav-link" href="/noticias"><i class="fas fa-newspaper"></i> Noticias</a></li>
                <li class="nav-item"><a class="nav-link" href="/tickets"><i class="fas fa-ticket-alt"></i> Tickets</a></li>
                <li class="nav-item"><a class="nav-link" href="/recordatorios"><i class="fas fa-bell"></i> Recordatorios</a></li>
                <li class="nav-item" th:if="${esAdmin == true}"><a class="nav-link admin-link" href="/admin/eventos"><i class="fas fa-tools"></i> Panel Admin</a></li>
                <li class="nav-item"><a class="nav-link" href="/logout"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="container">
    <h1>
        <i class="fas fa-users"></i>
        <span th:text="${mensaje}">Plantilla del Barça Atlètic</span>
    </h1>

    <div class="row">
        <div class="col-md-4">
            <div class="stat">
                <h3><i class="fas fa-users me-3"></i>25</h3>
                <p>Jugadores en Plantilla</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="stat">
                <h3><i class="fas fa-trophy me-3"></i>12</h3>
                <p>Victorias esta Temporada</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="stat">
                <h3><i class="fas fa-futbol me-3"></i>45</h3>
                <p>Goles Anotados</p>
            </div>
        </div>
    </div>

    <!-- Segunda fila de métricas -->
    <div class="row mt-3">
        <div class="col-md-4">
            <div class="stat">
                <h3>4.º</h3>
                <p>Posición en la tabla</p>
            </div>
        </div>

        <div class="col-md-4">
            <div class="stat">
                <h3>21,4</h3>
                <p>Edad media de la plantilla (años)</p>
            </div>
        </div>

        <div class="col-md-4">
            <div class="stat">
                <h3>18 / 7</h3>
                <p>Sub-23 / Jugadores extranjeros</p>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-12">
            <div class="stat">
                <h3 style="font-size: 1.5rem;"><i class="fas fa-info-circle me-3"></i>Información</h3>
                <p style="margin-top: 15px; line-height: 1.8;">
                    El Barça Atlètic es el equipo filial del FC Barcelona que compite en la Primera División RFEF.
                    Aquí se forman las futuras estrellas del primer equipo con jugadores jóvenes de gran talento.
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Tarjeta Próximo partido -->
<div class="row mt-4" th:if="${proximoEvento != null}">
    <div class="col-12 col-lg-10 mx-auto">
        <div class="next-match-card">

            <p class="next-match-label mb-1">Próximo partido</p>

            <!-- Cabecera centrada -->
            <div class="next-match-header mb-3">
                <p class="next-match-stadium mb-1"
                   th:text="${proximoEvento.lugar}">
                    ESTADI JOHAN CRUYFF
                </p>

                <p class="next-match-date mb-0"
                   th:text="${#temporals.format(proximoEvento.fecha, 'dd MMM yyyy · HH:mm')}">
                    24 dic 2025 · 19:00
                </p>
            </div>

            <!-- Layout Barça | VS | Rival -->
            <div class="next-match-layout">

                <!-- Barça Atlètic -->
                <div class="match-team">
                    <img src="/img/escudos/BARCA.png"
                         alt="Escudo Barça Atlètic"
                         class="match-team-logo">
                    <span class="match-team-name">BARÇA ATLÈTIC</span>
                </div>

                <!-- VS -->
                <div class="vs-text">VS</div>

                <!-- Rival (puedes cambiar el texto por algo dinámico si quieres más adelante) -->
                <div class="match-team">
                    <img src="/img/escudos/REAL.png"
                         alt="Escudo equipo rival"
                         class="match-team-logo">
                    <span class="match-team-name">REAL MADRID CASTILLA</span>
                </div>

            </div>

            <!-- Botón -->
            <div class="text-center mt-3">
                <a href="/eventos" class="btn next-match-btn">
                    Ver todos los eventos
                </a>
            </div>

        </div>
    </div>
</div>

<div class="team-banner mt-5">
    <div class="team-banner-content">
        <img src="/img/logo/logo.png"
             alt="Escudo FC Barcelona"
             class="team-banner-logo">

        <div class="team-banner-text">
            <h2 class="team-banner-title mb-1">Barça Atlètic</h2>
            <p class="team-banner-subtitle mb-0">
                Equipo filial del FC Barcelona · Primera Federación
            </p>
        </div>
    </div>
</div>

<!-- ==========================
     SECCIÓN JUGADORES
========================== -->
<div class="row mt-5 justify-content-center"
     th:if="${jugadores != null and !#lists.isEmpty(jugadores)}">

    <!-- Título centrado y contenido más estrecho -->
    <div class="col-12 col-lg-10">
        <h2 class="players-section-title text-center">
            <i class="fas fa-shirt me-3"></i>Jugadores de la plantilla
        </h2>

        <!-- Para filtrar por posición -->
        <div class="players-filter text-center mt-4 mb-3">
            <a th:href="@{/plantilla}"
               class="filter-chip"
               th:classappend="${posicionSeleccionada} == 'Todos' ? ' active'">
                Todos
            </a>

            <a th:href="@{/plantilla(posicion='Portero')}"
               class="filter-chip"
               th:classappend="${posicionSeleccionada} == 'Portero' ? ' active'">
                Porteros
            </a>

            <a th:href="@{/plantilla(posicion='Defensa')}"
               class="filter-chip"
               th:classappend="${posicionSeleccionada} == 'Defensa' ? ' active'">
                Defensas
            </a>

            <a th:href="@{/plantilla(posicion='Centrocampista')}"
               class="filter-chip"
               th:classappend="${posicionSeleccionada} == 'Centrocampista' ? ' active'">
                Centrocampistas
            </a>

            <a th:href="@{/plantilla(posicion='Delantero')}"
               class="filter-chip"
               th:classappend="${posicionSeleccionada} == 'Delantero' ? ' active'">
                Delanteros
            </a>
        </div>

        <!-- Grid de jugadores centrado -->
        <div class="row g-4 justify-content-center">
            <div class="col-12 col-sm-6 col-md-4 col-lg-3"
                 th:each="jugador : ${jugadores}">
                <div class="player-card h-100">
                    <img th:src="${jugador.imagenUrl}"
                         th:alt="${jugador.nombre}">
                    <div class="player-card-body">

                        <span class="player-badge"
                              th:classappend="' pos-' + ${#strings.toLowerCase(jugador.posicion)}"
                              th:text="${jugador.posicion}">
                            Centrocampista
                        </span>

                        <h5 th:text="${jugador.nombre}">Nombre jugador</h5>

                        <p class="player-meta">
                            <strong>Dorsal:</strong>
                            <span th:text="${jugador.dorsal}">10</span>
                        </p>
                        <p class="player-meta">
                            <strong>Edad:</strong>
                            <span th:text="${jugador.edad}">21</span> años
                        </p>
                        <p class="player-meta">
                            <strong>Nacionalidad:</strong>
                            <span th:text="${jugador.nacionalidad}">España</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Mensaje si no hay jugadores -->
<div class="row mt-5"
     th:if="${jugadores == null or #lists.isEmpty(jugadores)}">
    <div class="col-12">
        <div class="stat text-center">
            <p class="mb-0">No hay jugadores cargados todavía en la base de datos.</p>
        </div>
    </div>
</div>

<footer>
    <div class="container">
        <p>
            <i class="fas fa-copyright"></i> 2025 Barça Athletic Hub.  Todos los derechos reservados.
        </p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
